## Rime é¼ é¡»ç®¡ï¼ˆSquirrelï¼‰æœ™æœˆæ‹¼éŸ³ã€å°é¹¤åŒæ‹¼ã€è‡ªç„¶ç åŒæ‹¼é…ç½®è¯¦è§£

- æ¬¢è¿åŠ å…¥ [Rime é¼ é¡»ç®¡ç”µæŠ¥ç¾¤](https://t.me/rimeim)
- æ¬¢è¿å…³æ³¨ [Twitter](https://twitter.com/muzhilau)

### ç‰¹ç‚¹

* æœ™æœˆæ‹¼éŸ³ï¼ˆé»˜è®¤ï¼‰ã€å°é¹¤åŒæ‹¼ã€è‡ªç„¶ç åŒæ‹¼
* è¯åº“ä¸ä¸¢å¤±ï¼Œæ”¯æŒå¤šå¹³å°åŒæ­¥
* ç™¾ä¸‡[æœç‹—](https://pinyin.sogou.com/dict/cate/index/167)è¯åº“
* Emoji
* åŠ¨æ€è¾“å…¥æ—¶é—´ã€æ—¥æœŸã€æ˜ŸæœŸ
* é€Ÿåº¦å¿«ã€å¼€æºã€ä¿æŠ¤éšç§ã€è‡ªå®šä¹‰å¼º


### [ğŸ‘ å‡ºå”®ç¾å›½å®ä½“å¡ã€GVã€Gmailã€ChatGPTã€Apple IDã€ç¤¼å“å¡ ğŸ‘](https://github.com/ssnhd/googlevoice)

[![](https://i.imgur.com/RELjhoN.png)](https://github.com/ssnhd/googlevoice)


## å®‰è£…

ä¸‹è½½ <a href="https://rime.im/" target="_blank">é¼ é¡»ç®¡</a>ï¼Œå®‰è£…ååˆ‡æ¢åˆ° Rime è¾“å…¥æ³•ï¼Œå¼€å§‹ä½¿ç”¨ã€‚\
é»˜è®¤ç¹ä½“è¾“å‡ºï¼Œé€šè¿‡ç»„åˆé”® `Control+ï½€` æˆ– `F4` é”®åˆ‡æ¢è¾“å…¥æ–¹æ¡ˆï¼Œä¾‹å¦‚é€‰æ‹©ã€æœ™æœˆæ‹¼éŸ³Â·ç®€åŒ–å­—ã€‘ç®€ä½“è¾“å‡ºã€‚

> æ³¨ï¼šå»ºè®® Mac æ‰“å¼€ Squirrel é€šçŸ¥ï¼Œä¹‹åéƒ¨ç½²ä¼šæç¤ºæ˜¯å¦æˆåŠŸã€‚

## å¤‡ä»½åˆå§‹é…ç½®ï¼ˆå¯é€‰ï¼‰

é˜²æ­¢æ“ä½œä¸å½“é…ç½®æ— æ³•æ¢å¤ï¼Œå¯ä»¥ä¸ºåˆå§‹é…ç½®åšä¸ªå¤‡ä»½ã€‚åœ¨ã€ç»ˆç«¯ã€‘ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼ŒæŒ‰å›è½¦é”®ï¼Œä¼šå‡ºç°ä¸€ä¸ªã€Rime.bakã€‘æ–‡ä»¶å¤¹å³å¤‡ä»½ã€‚

```
cp -r ~/Library/Rime ~/Library/Rime.bak
```

![](https://i.imgur.com/1EFPjAK.png)

> è¿˜åŸï¼šåˆå§‹é…ç½®ã€Rimeã€‘æ–‡ä»¶å¤¹æ¸…ç©ºï¼Œå°†ã€Rime.bakã€‘å†…çš„æ–‡ä»¶å¤åˆ¶ç²˜è´´è¿‡å»ï¼Œç‚¹å‡»èœå•æ ã€ã„“ã€‘-ã€é‡æ–°éƒ¨ç½²ã€‘ã€‚

## å®šåˆ¶

1. ä¸‹è½½ [é…ç½®](https://github.com/ssnhd/rime/archive/refs/heads/master.zip) è§£å‹å¾—åˆ°ã€é…ç½®æ–‡ä»¶ã€‘å’Œã€èŠ±å›­æ˜æœå­—ä½“ã€‘ï¼Œå°†å­—ä½“å®‰è£…åˆ°å­—ä½“å†Œï¼ŒåŸå› æ˜¯ Mac ç¼ºå°‘éƒ¨åˆ†ç”Ÿåƒ»å­—ã€‚
2. ç‚¹å‡»èœå•æ ã€ã„“ã€‘-ã€ç”¨æˆ·è®¾å®šã€‘ï¼Œå°†ã€é…ç½®æ–‡ä»¶ã€‘é‡Œæ‰€æœ‰æ–‡ä»¶ç²˜è´´è¿›å»ï¼Œå¹¶é€‰æ‹©è¦†ç›–ã€‚
3. ç‚¹å‡»èœå•æ ã€ã„“ã€‘-ã€é‡æ–°éƒ¨ç½²ã€‘ï¼ˆå¿«æ·é”® `Control+Option+ï½€`ï¼‰ï¼Œè‡³æ­¤å®Œæˆå®šåˆ¶é…ç½®ï¼Œå¯ä»¥æ„‰å¿«çš„ä½¿ç”¨äº†ã€‚

![](https://i.imgur.com/3B0Aucj.png)

## å…¨å±€è®¾ç½®

å…¨å±€è®¾ç½®æ–‡ä»¶ `default.custom.yaml`ï¼ŒåŒ…å«è¾“å…¥æ–¹æ¡ˆã€å€™é€‰è¯ä¸ªæ•°ã€ä¸­è‹±æ–‡åˆ‡æ¢ã€å¿«æ·é”®ã€‚

> æ³¨ï¼šå»ºè®®ç”¨ VSCode è½¯ä»¶æ‰“å¼€æ–‡ä»¶ï¼Œå› åˆ†éš”ç¬¦é—®é¢˜è¿˜éœ€è¦ <a href="https://ssnhd.com/2021/10/01/VSCode" target="_blank">ä¿®æ”¹ Tab é”®</a>ã€‚

#### è¾“å…¥æ–¹æ¡ˆ

æŒ‰ `Control+ï½€` æ˜¾ç¤ºè¾“å…¥æ–¹æ¡ˆã€‚å¦‚æœä½ ä¸ç”¨åŒæ‹¼æˆ–å¤§å†™æ•°å­—ï¼Œå¯ä»¥å°†å…¶è¿åŒé…ç½®é‡Œçš„æ–‡ä»¶ä¸€å¹¶åˆ é™¤ï¼›åŒç†ï¼Œä½ ä¹Ÿå¯ä»¥æ·»åŠ å…¶ä»–æ–¹æ¡ˆï¼Œä¾‹å¦‚ï¼š[äº”ç¬”ã€åœ°çƒæ‹¼éŸ³ã€è¢–çæ‹¼éŸ³](https://github.com/rime/plum#essentials)ã€‚

> æ³¨ï¼šè¾“å…¥æ–¹æ¡ˆéƒ½æ˜¯ä»¥ `.schema.yaml` å‘½åï¼Œä¾‹å¦‚ `luna_pinyin_simp.schema.yaml`ï¼Œå¯ä»¥ä¿®æ”¹è¯¥æ–‡ä»¶è¿›è¡Œå®šåˆ¶ï¼Œä½†æ˜¯è¾“å…¥æ³•ä¸€æ—¦æ›´æ–°ï¼Œè¿™ä¸ªæ–‡ä»¶ä¹Ÿä¼šè·Ÿç€æ›´æ–°ï¼Œå®šåˆ¶å°±ä¼šä¸¢å¤±ã€‚\
> è§£å†³åŠæ³•æ˜¯æ–°å»ºæ–‡ä»¶ `luna_pinyin_simp.custom.yaml`ï¼Œç„¶ååœ¨é‡Œé¢å®šåˆ¶ï¼Œæ‰€æœ‰æ–¹æ¡ˆå¯¹åº”çš„è¡¥ä¸åéƒ½æ˜¯ `<æ–¹æ¡ˆå>.custom.yaml`ã€‚

```
schema_list:
  - schema: luna_pinyin_simp      # æœ™æœˆæ‹¼éŸ³
  - schema: double_pinyin_flypy   # å°é¹¤åŒæ‹¼
  - schema: double_pinyin         # è‡ªç„¶ç åŒæ‹¼
  - schema: numbers               # å¤§å†™æ•°å­—
```

#### å€™é€‰è¯ä¸ªæ•°

ä¿®æ”¹åé¢çš„æ•°å­—æ›´æ”¹å€™é€‰è¯ä¸ªæ•°ã€‚

```
menu/page_size: 9
```

#### ä¸­è‹±æ–‡åˆ‡æ¢

ä¸‹é¢ä»£ç è¡¨ç¤ºä½¿ç”¨ `Caps` é”®åˆ‡æ¢å¤§å°å†™ï¼Œä½¿ç”¨ `Shift` é”®åˆ‡æ¢ä¸­è‹±æ–‡ã€‚

```
ascii_composer/good_old_caps_lock: true # è‹¥ä¸º trueï¼Œ Caps åªåˆ‡æ¢å¤§å°å†™
ascii_composer/switch_key:
  Caps_Lock: commit_code                # Caps é”®
  Shift_L: commit_code                  # å·¦ Shiftï¼Œåˆ‡æ¢ä¸­è‹±æ–‡
  Shift_R: commit_code                  # å³ Shiftï¼Œåˆ‡æ¢ä¸­è‹±æ–‡
  Control_L: noop                       # å·¦ Controlï¼Œå±è”½è¯¥åˆ‡æ¢é”®
  Control_R: noop                       # å³ Controlï¼Œå±è”½è¯¥åˆ‡æ¢é”®
```

> æ³¨ï¼šå¦‚æœ Caps é”®ä¸èƒ½åˆ‡æ¢å¤§å°å†™ï¼Œæ‰“å¼€ Mac ç³»ç»Ÿåå¥½è®¾ç½® > é”®ç›˜ > è¾“å…¥æ³• > å–æ¶ˆã€ä½¿ç”¨å¤§å†™é”å®šé”®åˆ‡æ¢â€œç¾å›½â€è¾“å…¥æ¨¡å¼ã€‘ã€‚

å…¶ä»–åˆ‡æ¢ç­–ç•¥ï¼š

- **inline_ascii**ï¼šåœ¨è¾“å…¥æ³•çš„ä¸´æ—¶è‹±æ–‡ç¼–è¾‘åŒºå†…è¾“å…¥å­—æ¯ã€æ•°å­—ã€ç¬¦å·ã€ç©ºæ ¼ç­‰ï¼Œå›è½¦ä¸Šå±åè‡ªåŠ¨å¤ä½åˆ°ä¸­æ–‡
- **commit_text**ï¼šå·²è¾“å…¥çš„å€™é€‰æ–‡å­—ä¸Šå±å¹¶åˆ‡æ¢è‡³è‹±æ–‡è¾“å…¥æ¨¡å¼

#### ç¿»é¡µå¿«æ·é”®

- **when**ï¼šæœ‰å‡ ç§çŠ¶æ€ `composing`ã€`has_menu`ã€`paging`
- **accept**ï¼šæ§åˆ¶æ¥å—çš„æŒ‰é”® `minus`ã€`equal`,ã€`period`ã€`comma`ã€`bracketleft`ã€`bracketright`
- **send**ï¼šæ§åˆ¶åŠ¨ä½œ `Page_Up`ã€`Page_Down`ã€`Escape`(æ¸…ç©ºè¾“å…¥ç )

```
# ç¿»é¡µ
- { when: has_menu, accept: Tab, send: Page_Down }            # "tab" é”®ç¿»é¡µ, å’Œä¸‹ä¸€æ¡ "tab" é”®åˆ†è¯åªèƒ½äºŒé€‰ä¸€
- { when: composing, accept: Shift+Tab, send: Shift+Left }    # "Shift+Tab" é”®å‘å·¦é€‰æ‹¼éŸ³åˆ†è¯
- { when: paging, accept: minus, send: Page_Up }              # "-" ä¸Šä¸€é¡µ
- { when: has_menu, accept: equal, send: Page_Down }          # "=" ä¸‹ä¸€é¡µ
- { when: paging, accept: comma, send: Page_Up }              # "," ä¸Šä¸€é¡µ
- { when: has_menu, accept: period, send: Page_Down }         # "." ä¸‹ä¸€é¡µ
- { when: paging, accept: bracketleft, send: Page_Up }        # "[" ä¸Šä¸€é¡µ
- { when: has_menu, accept: bracketright, send: Page_Down }   # "]" ä¸‹ä¸€é¡µ

# å¿«æ·é”®
- { when: has_menu, accept: semicolon, send: 2 }              # ":" (åˆ†å·)é€‰æ‹©ç¬¬ 2 ä¸ªå€™é€‰è¯
- { when: has_menu, accept: apostrophe, send: 3 }             # "'" (å¼•å·)é€‰æ‹©ç¬¬ 3 ä¸ªå€™é€‰è¯
- { when: composing, accept: Shift+Tab, send: Shift+Left }    # "Shift+Tab" é”®å‘å·¦é€‰æ‹¼éŸ³åˆ†è¯
- { when: composing, accept: Control+a, send: Home }          # "Control+a" å…‰æ ‡ç§»è‡³é¦–
- { when: composing, accept: Control+e, send: End }           # "Control+e" å…‰æ ‡ç§»è‡³å°¾
- { when: composing, accept: Control+g, send: Escape }        # "Control+g" æ¸…ç 
- { when: composing, accept: Return, send: Escape }           # "Return" å›è½¦æ¸…ç 
- { when: always, accept: Control+Shift+1, select: .next }             # åˆ‡æ¢è¾“å…¥æ–¹æ¡ˆ
- { when: always, accept: Control+Shift+2, toggle: ascii_mode }        # ä¸­/è‹±æ–‡åˆ‡æ¢
- { when: always, accept: Control+Shift+3, toggle: full_shape }        # å…¨è§’/åŠè§’åˆ‡æ¢
- { when: always, accept: Control+Shift+4, toggle: simplification }    # ç¹ç®€ä½“åˆ‡æ¢
- { when: always, accept: Control+Shift+5, toggle: extended_charset }  # é€šç”¨/å¢å¹¿åˆ‡æ¢ï¼ˆæ˜¾ç¤ºç”Ÿåƒ»å­—ï¼‰
- { when: composing, accept: Control+b, send: Left }           # "Control+b" ç§»åŠ¨å…‰æ ‡
- { when: composing, accept: Control+f, send: Right }          # "Control+f" å‘å³é€‰æ‹©å€™é€‰è¯
- { when: composing, accept: Control+h, send: BackSpace }      # "Control+h" åˆ é™¤è¾“å…¥ç 
```

## è¯åº“æ ¼å¼

æ–°å»ºæ–‡ä»¶å‘½åæ ¼å¼ä¸º `<è¯åº“å>.dict.yaml`ã€‚

ç¤ºä¾‹ï¼šæœ™æœˆæ‹¼éŸ³ AV å¥³ä¼˜è¯åº“ `luna_pinyin.av.dict.yaml`ã€‚

```
# æ—¥æœ¬ AV å¥³ä¼˜

name: luna_pinyin.av  # è¦å’Œæ–‡ä»¶åä¸€è‡´
version: "2021.12.21"
sort: by_weight
use_preset_vocabulary: false
...
                              # æ­¤å¤„ç©ºä¸€è¡Œ
ä¸‰ä¸Šæ‚ äº  san shang you ya  1  # æ±‰å­—å’Œç¼–ç ç”¨ Tab é”®é—´éš”ï¼Œæ‹¼éŸ³ä¹‹é—´ç”¨ç©ºæ ¼é”®
```

## è¯åº“å¤–æŒ‚

æ‰“å¼€ `luna_pinyin.extended.dict.yaml`ï¼Œå°†è¯åº“åæ·»åŠ ã€‚

ç¤ºä¾‹ï¼šAV å¥³ä¼˜è¯åº“ `luna_pinyin.av.dict.yaml` å³è¾“å…¥ `luna_pinyin.av`ã€‚

```
import_tables:
  - luna_pinyin
  - luna_pinyin.av
  - luna_pinyin.chat
  - luna_pinyin.sogou
```

## è¯åº“è½½å…¥

æ‰“å¼€ `luna_pinyin_simp.custom.yaml`ï¼Œè½½å…¥ä¸­è‹±æ–‡è¯åº“ï¼Œè¿˜å¯ä»¥ä¿®æ”¹è‹±æ–‡å€™é€‰è¯ä½ç½®ã€Emoji æ˜¾ç¤ºæ³¨é‡Šç­‰ã€‚

```
patch:
  # å¯ç”¨ç½•è§å­—éæ¿¾
  engine/filters:
    - simplifier
    - simplifier@emoji_conversion
    - uniquifier
    - charset_filter@gbk # (â€»3) GBK è¿‡æ»¤
    - single_char_filter

  emoji_conversion:
    opencc_config: emoji.json
    option_name: show_emoji
    tags: abc
    #tips: all    # Emoji æ˜¾ç¤ºæ³¨é‡Š

  # æ”¹å†™æ‹¼å†™è¿ç®—ï¼Œå«è‹±æ–‡çš„è¯æ±‡ï¼ˆluna_pinyin.cn_en.dict.yamlï¼‰ä¸å½±å“ç®€æ‹¼
  "speller/algebra/@before 0": xform/^([b-df-hj-np-tv-z])$/$1_/

  # è½½å…¥æœ™æœˆæ‹¼éŸ³æ‰©å……è¯åº“
  "translator/dictionary": luna_pinyin.extended

  # åŠ è½½easy_enä¾èµ–
  "schema/dependencies/@1": easy_en
  # è½½å…¥ç¿»è¯‘è‹±æ–‡çš„ç è¡¨ç¿»è¯‘å™¨ï¼Œå–åä¸º english
  "engine/translators/@4": table_translator@english
  # englishç¿»è¯‘å™¨çš„è®¾å®šé¡¹
  english:
    dictionary: easy_en
    spelling_hints: 9
    enable_completion: false # æ˜¯å¦å¯ç”¨è‹±æ–‡è¾“å…¥è”æƒ³è¡¥å…¨
    enable_sentence: false # æ··è¾“æ—¶ä¸å‡ºç°å¸¦æœ‰å›¾æ¡ˆçš„è‹±æ–‡
    initial_quality: -0.5 # è‹±æ–‡å€™é€‰è¯çš„ä½ç½®, æ•°å€¼è¶Šå¤§è¶Šé å‰ã€‚
```

## æ¨¡å¼è½¬æ¢

æ‰“å¼€ `luna_pinyin_simp.custom.yaml`ï¼Œswitches åˆ—äº†ï¼šä¸­æ–‡è¥¿æ–‡ã€å…¨è§’åŠè§’ã€Emojiã€ç®€ç¹ä½“ã€å­—èŠ‚ç¼–ç ã€‚

```
patch:
  switches:
    - name: ascii_mode                   # 0 ä¸­æ–‡ï¼Œ1 è‹±æ–‡
      reset: 0
      states: ["ä¸­æ–‡", "è¥¿æ–‡"]
    - name: full_shape                   # å…¨è§’/åŠè§’ç¬¦å·å¼€å…³
      states: ["åŠè§’", "å…¨è§’"]
    - name: show_emoji                   # Emoji å¼€å…³
      reset: 1
      states: [ "ğŸˆšï¸ï¸\uFE0E", "ğŸˆ¶ï¸ï¸\uFE0F" ]
    - name: zh_simp                      # (â€»1) ç¹ç®€è½¬æ¢
      reset: 1
      states: ["æ¼¢å­—", "æ±‰å­—"]
    - options: ["utf8", "gbk", "gb2312"] # (â€»2)å­—ç¬¦é›†é€‰å•
      reset: 0                           # é»˜è®¤ UTF8
      states:
        - UTF-8
        - GBK
        - GB2312
```

## æœç‹—è¯åº“è½¬æ¢

è½¬æ¢æ–¹æ³•ï¼š[ç‚¹å‡»è¿™é‡Œ](https://ssnhd.com/2022/01/06/sogou-dict/)ã€‚æœ¬é…ç½®é‡Œçš„æœç‹—è¯åº“åŒ…å«å®˜ç½‘ 12 ä¸ªåˆ†ç±»ï¼ˆåŸå¸‚ã€å·¥ç¨‹ã€å†œä¸šã€äººæ–‡ã€ç¤¾ä¼šã€ç”Ÿæ´»ã€è‰ºæœ¯ã€åŒ»å­¦ã€æ¸¸æˆã€å¨±ä¹ã€è¿åŠ¨ã€è‡ªç„¶ï¼‰ï¼Œæ»¡è¶³ç»å¤§éƒ¨ä»½ç”¨æˆ·ä½¿ç”¨ã€‚

## Emoji

æ‰“å¼€ opencc æ–‡ä»¶å¤¹å†… `emoji_word.txt`ï¼Œè§„åˆ™ï¼šå­—ç¬¦ç”¨ Tab é”®é—´éš”ï¼Œå…¶ä»–ç”¨ç©ºæ ¼é”®ï¼Œç®€ä½“å’Œç¹ä½“éƒ½è¦åŠ å…¥ã€‚

![](/img/rime/emojikaixin.png)

```
å¼€å¿ƒ  å¼€å¿ƒ ğŸ˜„ ğŸ˜ƒ ğŸ˜º
é–‹å¿ƒ  é–‹å¿ƒ ğŸ˜„ ğŸ˜ƒ ğŸ˜º
```

æŒ‰ `Control + ï½€` ç»„åˆé”®ï¼Œå¯ä»¥é€‰æ‹©å¼€å¯æˆ–å…³é—­ Emojiã€‚

![](/img/rime/emojioff.png)

## å¿«æ·ç¬¦å·

ä»¥æœ™æœˆæ‹¼éŸ³ä¸ºä¾‹ï¼Œæ‰“å¼€ `luna_pinyin_simp.custom.yaml`ï¼Œè‡ªè¡Œæ·»åŠ ä¿®æ”¹ã€‚

> æ³¨ï¼šæ‰“å¼€ã€ç”¨æˆ·è®¾å®šã€‘-ã€build æ–‡ä»¶å¤¹ã€‘- `luna_pinyin_simp.schema.yaml` é‡Œæœ‰è¶…å¤šå¿«æ·ç¬¦å·ï¼Œå°†éœ€è¦ä¿®æ”¹çš„å¿«æ·ç¬¦å·æ·»åŠ åˆ°ä¸‹é¢åŒºåŸŸã€‚

![](/img/rime/emojikuaijie.png)

```
"/fs": [Â½, â€°, Â¼, â…“, â…”, Â¾, â…’ ]
"/xh": [ ï¼Š, Ã—, âœ±, â˜…, â˜†, âœ©, âœ§, â‹, âŠ, â‰, âˆ, â…, âœ¿, âœ²]
"/dq": [ğŸŒ,ğŸŒ,ğŸŒ,ğŸŒ,ğŸŒ‘,ğŸŒ’,ğŸŒ“,ğŸŒ”,ğŸŒ•,ğŸŒ–,ğŸŒ—,ğŸŒ˜]
"/sg": [ğŸ‡,ğŸ‰,ğŸŒ,ğŸ,ğŸ,ğŸ,ğŸ‘,ğŸ’,ğŸ“,ğŸ—,ğŸ¦,ğŸ‚,ğŸº,ğŸ»]
"/dw": [ğŸ™ˆ,ğŸµ,ğŸˆ,ğŸ·,ğŸ¨,ğŸ¼,ğŸ¾,ğŸ”,ğŸ¬,ğŸ ,ğŸ¦‹]
"/bq": [ğŸ˜€,ğŸ˜,ğŸ˜‚,ğŸ˜ƒ,ğŸ˜„,ğŸ˜…,ğŸ˜†,ğŸ˜‰,ğŸ˜Š,ğŸ˜‹,ğŸ˜,ğŸ˜,ğŸ˜˜,ğŸ˜—]
"/ss": [ğŸ’ª,ğŸ‘ˆ,ğŸ‘‰,ğŸ‘†,ğŸ‘‡,âœ‹,ğŸ‘Œ,ğŸ‘,ğŸ‘,âœŠ,ğŸ‘Š,ğŸ‘‹,ğŸ‘,ğŸ‘]
"#": "#"
"*": "*"
"`": "`"
"~": "~"
"@": "@"
"=": "="
'\': "ã€"
"%": "%"
"$": ["Â¥", "$"]
"|": ["|", "ï½œ", "Â·"]
"/": ["/", "Ã·"]
"'": { pair: ["ã€Œ", "ã€"] }  #è¡¨ç¤ºä¸€å¯¹
"[": "ã€"
"]": "ã€‘"
"<": "ã€Š"
">": "ã€‹"
```

## æ¨¡ç³ŠéŸ³çº é”™

æ‰“å¼€ `luna_pinyin_simp.custom.yaml`ï¼Œè‹¥å…³é—­å‰é¢åŠ  `#`ã€‚

```
# éœ€è¦å“ªçµ„å°±åˆªå»è¡Œé¦–çš„ # è™Ÿï¼Œå–®é›™å‘ä»»é¸
- derive/^([zcs])h/$1/             # zh, ch, sh => z, c, s
- derive/^([zcs])([^h])/$1h$2/     # z, c, s => zh, ch, sh
- derive/^n/l/                     # n => l
- derive/^l/n/                     # l => n

# é€™å…©çµ„ä¸€èˆ¬æ˜¯å–®å‘çš„
- derive/^r/l/                     # r => l
- derive/^ren/yin/                 # ren => yin, reng => ying
- derive/^r/y/                     # r => y

# ä¸‹é¢ hu <=> f é€™çµ„å¯«æ³•è¤‡é›œä¸€äº›ï¼Œåˆ†æƒ…æ³è¨è«–
- derive/^hu$/fu/                  # hu => fu
- derive/^hong$/feng/              # hong => feng
- derive/^hu([in])$/fe$1/          # hui => fei, hun => fen
- derive/^hu([ao])/f$1/            # hua => fa, ...
- derive/^fu$/hu/                  # fu => hu
- derive/^feng$/hong/              # feng => hong
- derive/^fe([in])$/hu$1/          # fei => hui, fen => hun
- derive/^f([ao])/hu$1/            # fa => hua, ...

# éŸ»æ¯éƒ¨ä»½
- derive/^([bpmf])eng$/$1ong/      # meng = mong, ...
- derive/([ei])n$/$1ng/            # en => eng, in => ing
- derive/([ei])ng$/$1n/            # eng => en, ing => in

# è¶…çº§ç®€æ‹¼
- abbrev/^([a-z]).+$/$1/           # ç°¡æ‹¼ï¼ˆé¦–å­—æ¯ï¼‰
- abbrev/^([zcs]h).+$/$1/          # ç°¡æ‹¼ï¼ˆzh, ch, shï¼‰

# æ™ºèƒ½çº é”™
- derive/([aeiou])ng$/$1gn/        # dagn => dang
- derive/([dtngkhrzcs])o(u|ng)$/$1o/  # zho => zhong|zhou
- derive/ong$/on/                  # zhonguo => zhong guo
- derive/ao$/oa/                   # hoa => hao
- derive/([iu])a(o|ng?)$/a$1$2/    # tain => tian
```

## åŠ¨æ€æ—¶é—´æ—¥æœŸ

æ‰“å¼€ `Rime.lua`ï¼Œé»˜è®¤ç¼–ç å¦‚ä¸‹ï¼ŒåŒæ‹¼ç”¨æˆ·æ—¶é—´å’Œæ˜ŸæœŸæ— æ•ˆï¼Œå»ºè®®æ”¹ä¸ºä¸å†²çªç¼–ç ï¼Œä¾‹å¦‚æ—¶é—´ `sj` æ”¹ä¸º `time`ã€‚

- ã€æ—¥æœŸã€‘`rq` = `2022-01-14`ã€`2022å¹´01æœˆ14æ—¥`ã€`01-14`ã€`2022/01/14`
- ã€æ—¶é—´ã€‘`sj` = `03:11`ã€`03:11:00`
- ã€æ˜ŸæœŸã€‘`xq` = `å‘¨äº”`ã€`æ˜ŸæœŸäº”`ã€`ç¤¼æ‹œäº”`

```
function date_translator(input, seg)
    if (input == "rq") then
       Candidate(type, start, end, text, comment)
        yield(Candidate("date", seg.start, seg._end, os.date("%Y-%m-%d"), ""))
        yield(Candidate("date", seg.start, seg._end, os.date("%Yå¹´%mæœˆ%dæ—¥"), ""))
        yield(Candidate("date", seg.start, seg._end, os.date("%m-%d"), ""))
        yield(Candidate("date", seg.start, seg._end, os.date("%Y/%m/%d"), ""))
    end
    if (input == "sj") then
       Candidate(type, start, end, text, comment)
        yield(Candidate("time", seg.start, seg._end, os.date("%H:%M"), ""))
        yield(Candidate("time", seg.start, seg._end, os.date("%H:%M:%S"), ""))
    end
    if (input == "xq") then
        local weakTab = {'æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'}
        yield(Candidate("week", seg.start, seg._end, "å‘¨"..weakTab[tonumber(os.date("%w")+1)], ""))
        yield(Candidate("week", seg.start, seg._end, "æ˜ŸæœŸ"..weakTab[tonumber(os.date("%w")+1)], ""))
        yield(Candidate("week", seg.start, seg._end, "ç¤¼æ‹œ"..weakTab[tonumber(os.date("%w")+1)], ""))
    end
end
```

å†å°†ä¸‹é¢ä»£ç æ·»åŠ åœ¨å¯¹åº”çš„è¾“å…¥æ–¹æ¡ˆï¼Œä¾‹å¦‚ï¼šæœ™æœˆæ‹¼éŸ³æ·»åŠ åœ¨ `luna_pinyin_simp.custom.yaml`ã€‚

```
"engine/translators/@6": lua_translator@date_translator
```

## è‡ªå®šä¹‰çŸ­è¯­

ç”¨æ–‡æœ¬ç¼–è¾‘æ‰“å¼€ `custom_phrase.txt`ï¼Œè§„åˆ™ï¼šå†…å®¹+ç¼–ç +æƒé‡ï¼ˆå¯é€‰ï¼‰ï¼Œä½¿ç”¨ Tab é”®é—´éš”ã€‚

ç¤ºä¾‹ï¼š

```
Rime  rime	4
é¼ é¡»ç®¡	rime	3
https://rime.im/	rime	2
Squirrel	rime	1
```

![](/img/rime/zidingyiduanyu.png)

## çš®è‚¤

æ‰“å¼€ `squirrel.custom.yaml`ï¼Œå°†çš®è‚¤ä»£ç æ·»åŠ è¿›å»ï¼ŒæŒ‰ç…§ä¸‹å›¾è¯´æ˜è®¾ç½®è‡ªå·±å–œæ¬¢çš„çš®è‚¤ã€‚

* style/color_scheme: æµ…è‰²çš®è‚¤åç§°
* style/color_scheme_dark: æ·±è‰²çš®è‚¤åç§°

![](https://i.imgur.com/caSIYQi.png)
å»¶ä¼¸ï¼šçš®è‚¤æ•ˆæœ[ç‚¹å‡»è¿™é‡Œ](https://ssnhd.com/2022/01/11/rime-skin)

**ä¿®æ”¹é¢œè‰²**

- æ¯ 8bit ä¸€ç»„ï¼Œä»ä½ä½åˆ°é«˜ä½åˆ†åˆ«ä»£è¡¨ Redã€Greenã€Blueã€Alphaï¼Œå…± 32bitã€‚
- Alpha å€¼ï¼ˆå¦‚æœç•Œé¢æ”¯æŒï¼‰æ˜¯å¯é€‰çš„ï¼Œé»˜è®¤ä¸º `0xF` F å³ä¸é€æ˜ã€‚
- æŠŠé¢œè‰²å€¼å†™ä¸ºåå…­è¿›åˆ¶æ•°ï¼Œå³ `0xAABBGGRR` æˆ– `0xBBGGRR`ã€‚

![](https://i.imgur.com/EG9rFyi.jpg)

## ç‰¹å®šç¨‹åºä¸­è‹±æ–‡

æ‰“å¼€ `squirrel.custom.yaml`ï¼Œå°†ç¨‹åºæ ‡è¯†ç¬¦æ·»åŠ è¿›å»ï¼Œå¹¶è¾“å…¥å¯¹åº”æ¨¡å¼å¼€å¯é»˜è®¤ä¸­è‹±æ–‡ã€‚

- `ascii_mode: true`ï¼šé»˜è®¤è‹±æ–‡
- `ascii_mode: false`ï¼šé»˜è®¤ä¸­æ–‡
- `ascii_punct: true`ï¼šå¼€å¯è‹±æ–‡æ ‡ç‚¹

ç¤ºä¾‹ï¼šVSCode é»˜è®¤è‹±æ–‡è¾“å…¥ï¼Œå§‹ç»ˆè¾“å‡ºè‹±æ–‡æ ‡ç‚¹ï¼ˆåŠè§’ï¼‰ã€‚

```
com.microsoft.VSCode:
    ascii_mode: true
    sacii_punct: true
```

**å»¶ä¼¸ï¼šå¦‚ä½•è·å–ç¨‹åºæ ‡è¯†ç¬¦ï¼Ÿ**

1. æ‰“å¼€ Mac æ´»åŠ¨ç›‘è§†å™¨ï¼Œé€‰ä¸­ç¨‹åºï¼Œç‚¹å‡»ä¸Šæ–¹ `Â·Â·Â·` é‡Œ**å–æ ·è¿›ç¨‹**ã€‚
2. æ‰¾åˆ° `Identifier` åé¢å³ä¸ºç¨‹åºæ ‡è¯†ç¬¦ã€‚

![](/img/rime/app.png)

## å¤§å†™æ•°å­—

é…ç½®æ–‡ä»¶æ˜¯ `numbers.schema.yaml`ã€‚åˆ‡æ¢è¾“å…¥æ–¹æ¡ˆé€‰æ‹©å¤§å†™æ•°å­—ï¼Œä½¿ç”¨æ–¹æ³•å‚ç…§ä¸‹è¡¨ã€‚

<table>
<thead>
<tr>
<th>æŒ‰é”®</th>
<th>è¾“å‡º</th>
<th>âœ‚ï¸</th>
<th>æŒ‰é”®ï¼ˆæŒ‰ä½Shiftï¼‰</th>
<th>è¾“å‡º</th>
</tr>
</thead>
<tbody>
<tr>
<td>1234567890</td>
<td>å£¹è´°åè‚†ä¼é™†æŸ’æŒç–é›¶</td>
<td>âœ‚ï¸</td>
<td>1234567890</td>
<td>ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹ã€‡</td>
</tr>
<tr>
<td>wqbsjfd.</td>
<td>ä¸‡ä»Ÿä½°æ‹¾è§’åˆ†ç¬¬ç‚¹</td>
<td>âœ‚ï¸</td>
<td>wqbsjfd.</td>
<td>ä¸‡åƒç™¾åè§’åˆ†ç¬¬ç‚¹</td>
</tr>
<tr>
<td>z</td>
<td>æ•´ä¹‹</td>
<td>âœ‚ï¸</td>
<td>z</td>
<td>æ•´ä¹‹</td>
</tr>
<tr>
<td>y</td>
<td>å…ƒæœˆäº¿</td>
<td>âœ‚ï¸</td>
<td>y</td>
<td>å…ƒæœˆäº¿</td>
</tr>
</tbody>
</table>

![](https://i.imgur.com/RQdg63e.gif)

## åˆ é™¤é”™è¯

å°†å…‰æ ‡ï¼ˆ`â†‘` `â†“`æˆ–`â†` `â†’`ï¼‰ç§»åˆ°è¦åˆ é™¤çš„è¯ç»„ä¸Šï¼ŒæŒ‰ `Shift+Fn+Delete` é”®ï¼ˆç¬¬ä¸‰æ–¹é”®ç›˜æŒ‰ `Control+Delete`ï¼‰ã€‚åªèƒ½ä»ç”¨æˆ·è¯å…¸ä¸­åˆ é™¤è¯ç»„ï¼Œè¯åº“é‡Œè¯ç»„åªä¼šå–æ¶ˆå…¶è°ƒé¢‘é¡ºåºã€‚

## åŒæ­¥

### åŒæ­¥è‡³ iCloud

1ã€é…ç½®æ–‡ä»¶é‡Œæ‰“å¼€ `installation.yaml`ï¼Œå°† `id` æ”¹ä¸º Macï¼ˆæ”¯æŒè‡ªå®šä¹‰ï¼‰ã€‚\
2ã€å¤åˆ¶ä¸‹é¢è·¯å¾„ä»£ç ç²˜è´´è¿›å»ï¼Œå°† `admin` æ›¿æ¢ä¸º Mac ç®¡ç†å‘˜åç§°ï¼ˆä»£ç é‡Œ `RimeSync` æ˜¯åŒæ­¥åæ–‡ä»¶å¤¹åç§°ï¼Œæ”¯æŒè‡ªå®šä¹‰ï¼‰ã€‚

```
sync_dir: "/Users/admin/Library/Mobile Documents/com~apple~CloudDocs/RimeSync"
```

![](https://i.imgur.com/QxLdF8m.png)
3ã€ç‚¹å‡»èœå•æ ã€ã„“ã€‘-ã€åŒæ­¥ç”¨æˆ·æ•°æ®ã€‘ï¼Œç­‰å¾…å‡ ç§’æç¤ºåŒæ­¥æˆåŠŸã€‚æ‰“å¼€è®¿è¾¾ iCloud æ‰¾åˆ°åä¸º RimeSync çš„æ–‡ä»¶å³æ˜¯ã€‚

å…¶ä»–åŒæ­¥æ–¹æ¡ˆï¼š[ç‚¹å‡»è¿™é‡Œ](https://github.com/rime/home/wiki/UserGuide#åŒæ­¥ç”¨æˆ¶è³‡æ–™)

### iCloud è¯åº“åŒæ­¥è‡³æ–°é…ç½®

1. é…ç½®æ–‡ä»¶é‡Œæ‰“å¼€ `installation.yaml`ï¼Œå°† id å’Œè·¯å¾„æ”¹æˆä¸ iCloud åŒæ­¥æ–‡ä»¶ `installation.yaml` é‡Œçš„ä¸€è‡³ã€‚
2. ç‚¹å‡»èœå•æ ã€ã„“ã€‘-ã€åŒæ­¥ç”¨æˆ·æ•°æ®ã€‘ï¼Œæ­¤æ—¶ä½ ä¹‹å‰çš„ä¸ªäººè¯åº“å·²ç»åŒæ­¥åˆ°æ–°é…ç½®é‡Œã€‚

![](https://i.imgur.com/gnT0FiK.png)

## æŠ¥é”™æ—¥å¿—

æ‰“å¼€ç»ˆç«¯è¾“å…¥ `$TMPDIR/rime.Squirrel.INFO` æŒ‰å›è½¦é”®ï¼Œå¤åˆ¶è·¯å¾„åœ°å€åœ¨è®¿è¾¾ä¸­æ‰“å¼€ã€‚

![](https://i.imgur.com/t2YlmrY.jpg)

æ‰¾åˆ°ã€rime.squirrel.INFOã€‘æ–‡ä»¶ï¼Œå³å‡»ç‚¹é€‰**æ˜¾ç¤ºåŸèº«**å¾—åˆ°æ—¥å¿—æ–‡ä»¶ã€‚

![](https://i.imgur.com/Ss0wEau.jpg)

## å…³äºè¯é¢‘

é…ç½®é‡Œæœç‹—è¯åº“å·²ç»é™„å¸¦è¯é¢‘ï¼Œå¯ä»¥æ»¡è¶³ç»å¤§éƒ¨åˆ†ç”¨æˆ·éœ€æ±‚ï¼Œåˆæ¬¡ä½¿ç”¨æå°‘éƒ¨åˆ†è¯é¢‘ä¸å®Œå…¨åœ¨é¦–ä½ï¼Œç¨å¾®ç”¨å‡ æ—¥å³å¯ã€‚

